| check_xxx             | acts on            | Purpose                                                                                                                                     | Errors                                                                                                                                                                                                                                                  | Warnings                                   | requires                                         | depends_on                      | Test                  | Old function                       | TODO                                                                                                                                                                                                 |
| --------------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------ | ------------------------------------------------ | ------------------------------- | --------------------- | ---------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| invalid_lines         | line               | checks for lines that are not empty, not comments and not tokens                                                                            | invalid-line                                                                                                                                                                                                                                            |                                            |                                                  |                                 | invalid-lines         | next_sentence                      | -                                                                                                                                                                                                    |
| columns_format        | line               | checks that token lines have the right number of columns and do not contain spurious whitespaces                                            | number-of-columns, empty-column, leading-whitespace, trailing-whitespace, repeated-whitespace, invalid-whitespace-mwt, invalid-whitespace                                                                                                               |                                            |                                                  | invalid-lines                   | columns-format        | next_sentence, validate_whitespace | -                                                                                                                                                                                                    |
| misplaced_comment     | block of lines     | checks that comment lines always precede token lines                                                                                        | misplaced-comment                                                                                                                                                                                                                                       |                                            |                                                  |                                 | misplaced-comment     | next_sentence                      | -                                                                                                                                                                                                    |
| extra_empty_line      | block of lines     |                                                                                                                                             | extra-empty-line                                                                                                                                                                                                                                        |                                            |                                                  |                                 | extra-empty-line      | next_sentence                      | -                                                                                                                                                                                                    |
| pseudo_empty_line     | line               | checks if a line that appears empty contains whitespaces                                                                                    | pseudo-empty-line                                                                                                                                                                                                                                       |                                            |                                                  |                                 | pseudo-empty-line     | next_sentence                      | -                                                                                                                                                                                                    |
| unicode_normalization | line               | checks that text is NFC                                                                                                                     | unicode-normalization                                                                                                                                                                                                                                   |                                            |                                                  |                                 | unicode-normalization | validate_unicode_normalization     | fix explanation_second                                                                                                                                                                               |
| mwt_empty_vals        | columns            | Checks that a multi-word token has _ empty values in all fields except MISC                                                                 | mwt-nonempty-field                                                                                                                                                                                                                                      |                                            | columns represent multiword token                |                                 | mwt-nonempty-field    | validate_mwt_empty_vals            | If a multi-word token has Typo=Yes, its component words must not have it. We must remember the span of the MWT and check it in validate_features_level4()                                            |
| empty_node_empty_vals | columns            | Checks that an empty node has _ empty values in HEAD and DEPREL.                                                                            | mwt-nonempty-field                                                                                                                                                                                                                                      |                                            | columns represent empty token                    |                                 | mwt-nonempty-2        | validate_empty_node_empty_vals     | possible copy-paste error in testid                                                                                                                                                                  |
| character_constraints | columns            | Checks general constraints on valid characters                                                                                              | invalid-deprel, invalid-deps, invalid-edeprel                                                                                                                                                                                                           |                                            |                                                  |                                 |                       | validate_character_constraints     | rename into check_deps_deprel_contraints                                                                                                                                                             |
| upos                  | columns            | Checks that the UPOS field contains one of the 17 known tags.                                                                               | unknown-upos                                                                                                                                                                                                                                            |                                            |                                                  |                                 |                       | validate_upos                      |                                                                                                                                                                                                      |
| features_level2       | columns            | Checks general constraints on feature-value format                                                                                          | unsorted-features, invalid-feature, repeated-feature-value, unsorted-feature-values, invalid-feature-value, repeated-feature                                                                                                                            |                                            |                                                  |                                 |                       | validate_features_level2           | the engine has to know that 'invalid-feature' is a testid that prevents from further testing, the original function also called features_present()                                                   |
| deps                  | columns            | Checks that DEPS is correctly formatted and that there are no self-loops in DEPS                                                            | unsorted-deps, unsorted-deps-2, unsorted-deps, deps-self-loop                                                                                                                                                                                           |                                            |                                                  |                                 |                       | validate_deps                      | the engine must assume that it is run after check_id_references() and only if DEPS is parsable and the head indices in it are OK. + removed check that there is at least one difference with deprels |
| misc                  | columns            | Checks raw MISC to allow Udapi parsing                                                                                                      | repeated-misc, misc-extra-space                                                                                                                                                                                                                         | empty-misc, empty-misc-key, misc-attr-typo | seen_enhanced_graph:bool                         |                                 |                       | validate_misc                      |                                                                                                                                                                                                      |
| deps_all_or_none      | block of tokens    | Checks that enhanced dependencies are present if they were present at another sentence, and absent if they were absent at another sentence. | edeps-only-sometimes                                                                                                                                                                                                                                    |                                            |                                                  |                                 |                       | validate_deps_all_or_none          | update state                                                                                                                                                                                         |
| newlines              | file               | Checks that the input file consistently uses linux-style newlines (LF only, not CR LF like in Windows).                                     | non-unix-newline                                                                                                                                                                                                                                        |                                            |                                                  |                                 |                       | validate_newlines                  |                                                                                                                                                                                                      |
| token_ranges          | block of tokens    | Checks that the word ranges for multiword tokens are valid.                                                                                 | invalid-word-interval, overlapping-word-intervals                                                                                                                                                                                                       |                                            |                                                  |                                 |                       | validate_token_ranges              |                                                                                                                                                                                                      |
| id_sequence           | block of tokens    | Validates that the ID sequence is correctly formed.                                                                                         | invalid-word-id, invalid-word-interval, misplaced-word-interval, misplaced-empty-node, word-id-sequence, reversed-word-interval, word-interval-out                                                                                                      |                                            |                                                  |                                 |                       | validate_id_sequence               | If this function returns an nonempty list, subsequent tests should not be run.                                                                                                                       |
| id_references         | blocks of tokens   | Verifies that HEAD and DEPS reference existing IDs.                                                                                         | invalid-head, unknown-head, invalid-deps, invalid-ehead, unknown-ehead                                                                                                                                                                                  |                                            |                                                  |                                 |                       | validate_id_references             | If this function returns a nonempty list, most of the other tests should be skipped for the current sentence (in particular anything that considers the tree structure).                             |
| tree                  | blocks of tokens   | Performs basic validation of the tree structure (without UDApi).                                                                            | head-self-loop, multiple-roots, non-tree                                                                                                                                                                                                                |                                            | node_line:int, single_root:bool                  |                                 |                       | validate_tree                      | should be called only if both ID and HEAD values have been found valid for all tree nodes, including the sequence of IDs and the references from HEAD to existing IDs.                               |
| sent_id               | blocks of comments | Checks that sentence id exists, is well-formed and unique.                                                                                  | invalid-sent-id, missing-sent-id, multiple-sent-id, non-unique-sent-id, slash-in-sent-id                                                                                                                                                                |                                            | allow_slash:bool, known_sent_ids:set             |                                 |                       | validate_sent_id                   | add sent_id to known sent_ids                                                                                                                                                                        |
| text_meta             | block              | Checks metadata other than sentence id                                                                                                      | multiple-newdoc, multiple-newpar, spaceafter-newdocpar, missing-text, multiple-text, text-trailing-whitespace, nospaceafter-yes, spaceafter-value, spaceafter-empty-node, spaceafter-mwt-node, text-form-mismatch, missing-spaceafter, text-extra-chars |                                            | spaceafterno_in_effect:bool                      |                                 |                       | validate_text_meta                 | it would probably be easier to refactor this function in multiple checks + it might not work with our current next_block()                                                                           |
| deprels_level2        | node               | Checks that a dependency relation (main) label is listed as approved in the given language.                                                 | unknown-deprel, unknown-edeprel                                                                                                                                                                                                                         |                                            | deprels:Dict, lang:str                           |                                 |                       | validate_deprels                   |                                                                                                                                                                                                      |
| deprels_level4        | node               | Checks that a dependency relation label is listed as approved in the given language.                                                        | unknown-deprel, unknown-edeprel                                                                                                                                                                                                                         |                                            | deprels:Dict, lang:str                           | unknown-deprel, unknown-edeprel |                       | validate_deprels                   |                                                                                                                                                                                                      |
| root                  | node               | Checks that DEPREL is "root" iff HEAD is 0.                                                                                                 | 0-is-not-root, root-is-not-0, enhanced-0-is-not-root, enhanced-root-is-not-0                                                                                                                                                                            |                                            |                                                  |                                 |                       | validate_root                      |                                                                                                                                                                                                      |
| enhanced_orphan       | node               | Checks universally valid consequences of the annotation guidelines in the enhanced representation.                                          | empty-node-after-eorphan, eorphan-after-empty-node                                                                                                                                                                                                      |                                            | seen_empty_node:bool, seen_enhanced_orphan:bool  |                                 |                       | validate_enhanced_orphan           |                                                                                                                                                                                                      |
| words_with_spaces     | node               | Checks a single line for disallowed whitespace.                                                                                             | invalid-word-with-space                                                                                                                                                                                                                                 |                                            | lang:str, specs:UDSpecs                          |                                 |                       | validate_words_with_spaces         | we assume that all language-independent whitespace-related tests have already been done on level 1, so we only check for words with spaces that are explicitly allowed in a given language.          |
| features_level4       | node               | Checks that a feature-value pair is listed as approved.                                                                                     | mwt-typo-repeated-at-word, feature-unknown, feature-not-permitted, feature-value-unknown, feature-upos-not-permitted, feature-value-upos-not-permitted                                                                                                  |                                            | lang:str, specs:UDSpecs, mwt_typo_span_end:bool? |                                 |                       | validate_features_level4           | deal with mwt_span_end                                                                                                                                                                               |
| auxiliary_verbs       | node               | Checks that the UPOS tag AUX is used only with lemmas that are known to act as auxiliary verbs or particles in the given language.          | aux-lemma                                                                                                                                                                                                                                               |                                            | lang:str, specs:UDSpecs                          |                                 |                       | validate_auxiliary_verbs           |                                                                                                                                                                                                      |
| copula_lemmas         | node               | Check that the relation cop is used only with lemmas that are known to act as copulas in the given language.                                | cop-lemma                                                                                                                                                                                                                                               |                                            | lang:str, specs:UDSpecs                          |                                 |                       | validate_copula_lemmas             |                                                                                                                                                                                                      |